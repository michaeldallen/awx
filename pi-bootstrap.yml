- name: add management ssh key
  hosts: all
  become: true
  become_user: root
  tasks:
  
    - name: Thanks
      debug:
        msg: "Thank you, Chris Kong: https://medium.com/@visualskyrim/ansible-playbook-deploy-the-public-key-to-remote-hosts-da3f3b4b5481"
  
    - name: ensure ~/.ssh exists
      file:
        path: /root/.ssh
        state: directory
        
    - name: ensure ~/.ssh/authorized_keys exists
      file:
        path: /root/.ssh/authorized_keys
        state: touch 
        
    - name: add management public key
      lineinfile:
        path: /root/.ssh/authorized_keys
        line: "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAILZRBMNpKYCxW5RfcMlVOZzM9msh2s6s3OzWS4e97xAm g4-pinet"
